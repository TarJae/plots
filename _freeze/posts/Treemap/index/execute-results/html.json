{
  "hash": "f77db7e559ed8acb4cc4eed28446c47d",
  "result": {
    "markdown": "---\ntitle: \"Plotly treemap\"\nauthor: \"tarjae\"\nimage: \"plotly_treemap.png\"\ncategories: [treemap]\ndate: last-modified\ndate-format: \"[Last Updated on] MMMM, YYYY\"\nformat:\n  html:\n    code-fold: true\n    code-summary: \"Show the code\"\n---\n\n\n## Plotly treemap:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(plotly)\nlibrary(dplyr)\n\ndtd7 <- structure(\n  list(\n    topic = structure(\n      c(9L, 8L, 4L, 7L, 2L, 6L, 1L, 3L, 5L, 10L, 13L, 11L, 12L),\n      .Label = c(\"Owners' Equivalent Rent of Residences\", \"Rent of Primary Residence\",\n                 \"New Vehicles\", \"Used Cars and Trucks\", \"Cereals And bakery Products\",\n                 \"Motor Vehicle Maintenance and Repair\", \"Airline Fares\",\n                 \"Apparel\", \"Alcoholic Beverages\", \"Hospital Services\",\n                 \"Tobacco and Smoking\", \"Physicians Services\", \"Gasoline All Types\",\n                 \"Electricity\", \"Utility (Piped) Gas Services\",\n                 \"Nonalcoholic Beverages and Beverage Materials\",\n                 \"Food Away From Home\", \"Meats Poultry Fish and\", \n                 \"Fruits and Vegetables\", \"Dairy and Related Products\",\n                 \"Cereals And bakery Products\", \"Other Foods at Home\"),\n      class = \"factor\"),\n    n = structure(\n      c(4L, 3L, 9L, 11L, 12L, 2L, 1L, 6L, 10L, 5L, 7L, 8L, 1L),\n      .Label = c(\"6.7\", \"6.9\", \"1.4\", \"3.8\", \"19.2\", \"8.5\", \"12.1\", \"1.1\", \"5\", \"2.9\", \n                 \"6.3\", \"7.7\", \"0.7\", \"8.9\", \"3.4\", \"10.4\", \"2.9\", \"5.3\", \"0.1\", \"0.4\", \n                 \"1.4\", \"3.4\", \"3.3\"),\n      class = \"factor\")\n  ),\n  class = \"data.frame\",\n  row.names = c(NA, -13L)\n)\n\n\n\nplot_ly(\n  dtd7 %>% \n    mutate(n = as.numeric(as.character(n))), #transform to numeric\n  labels = ~topic,\n  parents = NA,\n  values = ~n,\n  type = 'treemap',\n  hovertemplate = \"Category: %{label}<br>Percent: %{value}%<extra></extra>\" #added % after value!\n)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-6a422198a705b59b5795\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-6a422198a705b59b5795\">{\"x\":{\"visdat\":{\"48c01a7fbdf\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"48c01a7fbdf\",\"attrs\":{\"48c01a7fbdf\":{\"labels\":{},\"parents\":null,\"values\":{},\"hovertemplate\":\"Category: %{label}<br>Percent: %{value}%<extra><\\/extra>\",\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"type\":\"treemap\"}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"hovermode\":\"closest\",\"showlegend\":false},\"source\":\"A\",\"config\":{\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"data\":[{\"labels\":[\"Alcoholic Beverages\",\"Apparel\",\"Used Cars and Trucks\",\"Airline Fares\",\"Rent of Primary Residence\",\"Motor Vehicle Maintenance and Repair\",\"Owners' Equivalent Rent of Residences\",\"New Vehicles\",\"Cereals And bakery Products\",\"Hospital Services\",\"Gasoline All Types\",\"Tobacco and Smoking\",\"Physicians Services\"],\"parents\":[null,null,null,null,null,null,null,null,null,null,null,null,null],\"values\":[3.7999999999999998,1.3999999999999999,5,6.2999999999999998,7.7000000000000002,6.9000000000000004,6.7000000000000002,8.5,2.8999999999999999,19.199999999999999,12.1,1.1000000000000001,6.7000000000000002],\"hovertemplate\":[\"Category: %{label}<br>Percent: %{value}%<extra><\\/extra>\",\"Category: %{label}<br>Percent: %{value}%<extra><\\/extra>\",\"Category: %{label}<br>Percent: %{value}%<extra><\\/extra>\",\"Category: %{label}<br>Percent: %{value}%<extra><\\/extra>\",\"Category: %{label}<br>Percent: %{value}%<extra><\\/extra>\",\"Category: %{label}<br>Percent: %{value}%<extra><\\/extra>\",\"Category: %{label}<br>Percent: %{value}%<extra><\\/extra>\",\"Category: %{label}<br>Percent: %{value}%<extra><\\/extra>\",\"Category: %{label}<br>Percent: %{value}%<extra><\\/extra>\",\"Category: %{label}<br>Percent: %{value}%<extra><\\/extra>\",\"Category: %{label}<br>Percent: %{value}%<extra><\\/extra>\",\"Category: %{label}<br>Percent: %{value}%<extra><\\/extra>\",\"Category: %{label}<br>Percent: %{value}%<extra><\\/extra>\"],\"type\":\"treemap\",\"marker\":{\"color\":\"rgba(31,119,180,1)\",\"line\":{\"color\":\"rgba(255,255,255,1)\"}},\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\r\n<script src=\"../../site_libs/plotly-binding-4.10.2/plotly.js\"></script>\r\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\r\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\r\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\r\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}